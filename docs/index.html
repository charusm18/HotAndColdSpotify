<!DOCTYPE html>
<html>
 
<head>
 <title>Hot&Cold</title>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1">
 <link rel="stylesheet" href="styles/theme.css">
</head>
 
<body id="landing">
 
 <!-- before getting authentication from Spotify login -->
 <div class="container">
   <div id="login">
     <div class="wrapper">
       <header>Hot<span style="color: #1DB954">&</span>Cold</header>
       <div class="tag">
         <p>Who’s your music taste twin and who’s your polar opposite?</p>
         <a href="login" class="spotify-button">LOG IN WITH SPOTIFY</a>
       </div>
     </div>
   </div>
 
     <div id="loggedin">
       <div id="user-profile">
       </div>
       <div id="oauth">
       </div>
     </div>
   </div>
 
 
   <!-- page that loads after getting authentication from spotify -->
   <script id="user-profile-template" type="text/x-handlebars-template">
   <body id="main">
     <div class="wrapper">
         <div class="beg">
             <header id="main">Hot<span style="color: #1DB954">&</span>Cold</header>
             <p class="des">has generated your music taste matches!</p>
             <div class="arrow">
                 <img class="down-arrow" src="images/down-arrow.png">
                 <p>MEET YOUR MATCHES</p>
             </div>
         </div>
          <!--     HOT     -->
         <div class="hot">
             <img class="icon" src="images/fire.png">
             <p class="subheading">HOTTEST MATCH</p>
             <p class="match">{{data.hotPercentMatch}}% FIT</p>
              <div class="square">
                 <img class="profile-pic" alt="profile" src="{{data.hotMatch.user.profilePic}}">
             </div>
              <a target = "_blank" href="{{data.hotMatch.user.userUrl}}" id="profile-button" class="spotify-button">{{data.hotMatch.user.displayName}}</a>
              <div class="section">
                 <h2>How Your Top Genres Compare</h2>
                 <div class="compare-genres">
                     <div class="prof-left">
                         <img class="profile-pic-sm" src="{{user.user.profilePic}}">
                     </div>
                     <div class="genre-grid-container">
                         <div class="genre-item">1 ⋅ {{user.genres.[0]}}</div>
                         <div class="genre-item">1 ⋅ {{data.hotMatch.genres.[0]}}</div>
                         <div class="genre-item">2 ⋅ {{user.genres.[1]}}</div>
                         <div class="genre-item">2 ⋅ {{data.hotMatch.genres.[1]}}</div>
                         <div class="genre-item">3 ⋅ {{user.genres.[2]}}</div>
                         <div class="genre-item">3 ⋅ {{data.hotMatch.genres.[2]}}</div>
                         <div class="genre-item">4 ⋅ {{user.genres.[3]}}</div>
                         <div class="genre-item">4 ⋅ {{data.hotMatch.genres.[3]}}</div>
                         <div class="genre-item">5 ⋅ {{user.genres.[4]}}</div>
                         <div class="genre-item">5 ⋅ {{data.hotMatch.genres.[4]}}</div>
                     </div>
                     <div class="prof-right">
                         <img class="profile-pic-sm" src="{{data.hotMatch.user.profilePic}}">
                     </div>
                 </div>
             </div>
              <div class="section">
                 <h2>{{data.hotMatch.user.displayName}}'s Top 10 Songs</h2>
                 <div class="song-grid-container">
                     <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet" />
                     <div class="song-item">
                         <img src="{{data.hotMatch.songs.0.songPicture}}" class="song-pic">
                         <div class="song-info">
                             <p class="song-title">{{data.hotMatch.songs.0.songName}}</p>
                             <p class="song-artist">{{data.hotMatch.songs.0.songArtists}}</p>
                         </div>
                     </div>
                     <div class="song-item">
                         <img src="{{data.hotMatch.songs.1.songPicture}}" class="song-pic">
                         <div class="song-info">
                             <p class="song-title">{{data.hotMatch.songs.1.songName}}</p>
                             <p class="song-artist">{{data.hotMatch.songs.1.songArtists}}</p>
                         </div>
                     </div>
                     <div class="song-item">
                         <img src="{{data.hotMatch.songs.2.songPicture}}" class="song-pic">
                         <div class="song-info">
                             <p class="song-title">{{data.hotMatch.songs.2.songName}}</p>
                             <p class="song-artist">{{data.hotMatch.songs.2.songArtists}}</p>
                         </div>
                     </div>
                     <div class="song-item">
                         <img src="{{data.hotMatch.songs.3.songPicture}}" class="song-pic">
                         <div class="song-info">
                          <p class="song-title">{{data.hotMatch.songs.3.songName}}</p>
                          <p class="song-artist">{{data.hotMatch.songs.3.songArtists}}</p>
                         </div>
                     </div>
                     <div class="song-item">
                         <img src="{{data.hotMatch.songs.4.songPicture}}" class="song-pic">
                         <div class="song-info">
                          <p class="song-title">{{data.hotMatch.songs.4.songName}}</p>
                          <p class="song-artist">{{data.hotMatch.songs.4.songArtists}}</p>
                         </div>
                     </div>
                     <div class="song-item">
                         <img src="{{data.hotMatch.songs.5.songPicture}}" class="song-pic">
                         <div class="song-info">
                          <p class="song-title">{{data.hotMatch.songs.5.songName}}</p>
                          <p class="song-artist">{{data.hotMatch.songs.5.songArtists}}</p>
                         </div>
                     </div>
                     <div class="song-item">
                         <img src="{{data.hotMatch.songs.6.songPicture}}" class="song-pic">
                         <div class="song-info">
                          <p class="song-title">{{data.hotMatch.songs.6.songName}}</p>
                          <p class="song-artist">{{data.hotMatch.songs.6.songArtists}}</p>
                         </div>
                     </div>
                     <div class="song-item">
                         <img src="{{data.hotMatch.songs.7.songPicture}}" class="song-pic">
                         <div class="song-info">
                          <p class="song-title">{{data.hotMatch.songs.7.songName}}</p>
                          <p class="song-artist">{{data.hotMatch.songs.7.songArtists}}</p>
                         </div>
                     </div>
                     <div class="song-item">
                         <img src="{{data.hotMatch.songs.8.songPicture}}" class="song-pic">
                         <div class="song-info">
                          <p class="song-title">{{data.hotMatch.songs.8.songName}}</p>
                          <p class="song-artist">{{data.hotMatch.songs.8.songArtists}}</p>
                         </div>
                     </div>
                     <div class="song-item">
                         <img src="{{data.hotMatch.songs.9.songPicture}}" class="song-pic">
                         <div class="song-info">
                          <p class="song-title">{{data.hotMatch.songs.9.songName}}</p>
                          <p class="song-artist">{{data.hotMatch.songs.9.songArtists}}</p>
                         </div>
                     </div>
                 </div>
                 <a href="#" id="profile-button" class="spotify-button">CREATE PLAYLIST</a>
             </div>
              <div class="section">
                 <h2>{{data.hotMatch.user.displayName}}'s Top Artists</h2>
                 <div class="artist-grid-container">
                     <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet" />
                     <div class="artist-item">
                         <img src="{{data.hotMatch.artists.0.artistPic}}" class="artist-pic">
                         <p class="artist-name">{{data.hotMatch.artists.0.artistName}}</p>
                     </div>
                     <div class="artist-item">
                         <img src="{{data.hotMatch.artists.1.artistPic}}" class="artist-pic">
                         <p class="artist-name">{{data.hotMatch.artists.1.artistName}}</p>
                     </div>
                     <div class="artist-item">
                         <img src="{{data.hotMatch.artists.2.artistPic}}" class="artist-pic">
                         <p class="artist-name">{{data.hotMatch.artists.2.artistName}}</p>
                     </div>
                 </div>
             </div>
         </div>
          <!--   COLD   -->
         <div class="cold">
             <img class="icon" src="images/ice.png">
             <p class="subheading" id="cold-text">COLDEST MATCH</p>
             <p class="match">{{data.coldPercentMatch}}% FIT</p>
              <div class="square">
                 <img class="profile-pic" alt="profile" src="{{data.coldMatch.user.profilePic}}">
             </div>
              <a target = "_blank" href="{{data.coldMatch.user.userUrl}}" id="profile-button" class="spotify-button">{{data.coldMatch.user.displayName}}</a>
              <div class="section">
                 <h2 id="cold-text">How Your Top Genres Compare</h2>
                 <div class="compare-genres">
                     <div class="prof-left">
                         <img class="profile-pic-sm" src="{{user.user.profilePic}}">
                     </div>
                     <div class="genre-grid-container">
                         <div class="genre-item">1 ⋅ {{user.genres.[0]}}</div>
                         <div class="genre-item">1 ⋅ {{data.coldMatch.genres.[0]}}</div>
                         <div class="genre-item">2 ⋅ {{user.genres.[1]}}</div>
                         <div class="genre-item">2 ⋅ {{data.coldMatch.genres.[1]}}</div>
                         <div class="genre-item">3 ⋅ {{user.genres.[2]}}</div>
                         <div class="genre-item">3 ⋅ {{data.coldMatch.genres.[2]}}</div>
                         <div class="genre-item">4 ⋅ {{user.genres.[3]}}</div>
                         <div class="genre-item">4 ⋅ {{data.coldMatch.genres.[3]}}</div>
                         <div class="genre-item">5 ⋅ {{user.genres.[4]}}</div>
                         <div class="genre-item">5 ⋅ {{data.coldMatch.genres.[4]}}</div>
                     </div>
                     <div class="prof-right">
                         <img class="profile-pic-sm" src="{{data.coldMatch.user.profilePic}}">
                     </div>
                 </div>
             </div>
              <div class="section">
                 <h2 id="cold-text">{{data.coldMatch.user.displayName}}'s Top 10 Songs</h2>
                 <div class="song-grid-container">
                     <div class="song-item" id="cold-card">
                         <img src="{{data.coldMatch.songs.0.songPicture}}" class="song-pic">
                         <div class="song-info" id="cold-text-black">
                            <p class="song-title">{{data.coldMatch.songs.0.songName}}</p>
                            <p class="song-artist">{{data.coldMatch.songs.0.songArtists}}</p>
                         </div>
                     </div>
                     <div class="song-item" id="cold-card">
                         <img src="{{data.coldMatch.songs.1.songPicture}}" class="song-pic">
                         <div class="song-info" id="cold-text-black">
                          <p class="song-title">{{data.coldMatch.songs.1.songName}}</p>
                          <p class="song-artist">{{data.coldMatch.songs.1.songArtists}}</p>
                         </div>
                     </div>
                     <div class="song-item" id="cold-card">
                         <img src="{{data.coldMatch.songs.2.songPicture}}" class="song-pic">
                         <div class="song-info" id="cold-text-black">
                          <p class="song-title">{{data.coldMatch.songs.2.songName}}</p>
                          <p class="song-artist">{{data.coldMatch.songs.2.songArtists}}</p>
                         </div>
                     </div>
                     <div class="song-item" id="cold-card">
                         <img src="{{data.coldMatch.songs.3.songPicture}}" class="song-pic">
                         <div class="song-info" id="cold-text-black">
                          <p class="song-title">{{data.coldMatch.songs.3.songName}}</p>
                          <p class="song-artist">{{data.coldMatch.songs.3.songArtists}}</p>
                         </div>
                     </div>
                     <div class="song-item" id="cold-card">
                         <img src="{{data.coldMatch.songs.4.songPicture}}" class="song-pic">
                         <div class="song-info" id="cold-text-black">
                          <p class="song-title">{{data.coldMatch.songs.4.songName}}</p>
                          <p class="song-artist">{{data.coldMatch.songs.4.songArtists}}</p>
                         </div>
                     </div>
                     <div class="song-item" id="cold-card">
                         <img src="{{data.coldMatch.songs.5.songPicture}}" class="song-pic">
                         <div class="song-info" id="cold-text-black">
                          <p class="song-title">{{data.coldMatch.songs.5.songName}}</p>
                          <p class="song-artist">{{data.coldMatch.songs.5.songArtists}}</p>
                         </div>
                     </div>
                     <div class="song-item" id="cold-card">
                         <img src="{{data.coldMatch.songs.6.songPicture}}" class="song-pic">
                         <div class="song-info" id="cold-text-black">
                          <p class="song-title">{{data.coldMatch.songs.6.songName}}</p>
                          <p class="song-artist">{{data.coldMatch.songs.6.songArtists}}</p>
                         </div>
                     </div>
                     <div class="song-item" id="cold-card">
                         <img src="{{data.coldMatch.songs.7.songPicture}}" class="song-pic">
                         <div class="song-info" id="cold-text-black">
                          <p class="song-title">{{data.coldMatch.songs.7.songName}}</p>
                          <p class="song-artist">{{data.coldMatch.songs.7.songArtists}}</p>
                         </div>
                     </div>
                     <div class="song-item" id="cold-card">
                         <img src="{{data.coldMatch.songs.8.songPicture}}" class="song-pic">
                         <div class="song-info" id="cold-text-black">
                          <p class="song-title">{{data.coldMatch.songs.8.songName}}</p>
                          <p class="song-artist">{{data.coldMatch.songs.8.songArtists}}</p>
                         </div>
                     </div>
                     <div class="song-item" id="cold-card">
                         <img src="{{data.coldMatch.songs.9.songPicture}}" class="song-pic">
                         <div class="song-info" id="cold-text-black">
                          <p class="song-title">{{data.coldMatch.songs.9.songName}}</p>
                          <p class="song-artist">{{data.coldMatch.songs.9.songArtists}}</p>
                         </div>
                     </div>
                 </div>
                 <a href="#" id="profile-button" class="spotify-button">CREATE PLAYLIST</a>
             </div>
              <div class="section">
                 <h2 id="cold-text">{{data.coldMatch.user.displayName}}'s Top Artists</h2>
                 <div class="artist-grid-container">
                     <div class="artist-item">
                         <img src="{{data.coldMatch.artists.0.artistPic}}" class="artist-pic">
                         <p class="artist-name">{{data.coldMatch.artists.0.artistName}}</p>
                     </div>
                     <div class="artist-item">
                         <img src="{{data.coldMatch.artists.1.artistPic}}" class="artist-pic">
                         <p class="artist-name">{{data.coldMatch.artists.1.artistName}}</p>
                     </div>
                     <div class="artist-item">
                         <img src="{{data.coldMatch.artists.2.artistPic}}" class="artist-pic">
                         <p class="artist-name">{{data.coldMatch.artists.2.artistName}}</p>
                     </div>
                 </div>
             </div>
       </div>
   </div>
 </body>

   </script>
 
 
   <script id="oauth-template" type="text/x-handlebars-template">
   </script>
 
   <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/2.0.0-alpha.1/handlebars.min.js"></script>
   <script src="https://code.jquery.com/jquery-1.10.1.min.js"></script>
   <script>
     (function () {
 
       /**
        * Obtains parameters from the hash of the URL
        * @return Object
        */
       function getHashParams() {
         var hashParams = {};
         var e, r = /([^&;=]+)=?([^&;]*)/g,
           q = window.location.hash.substring(1);
         while (e = r.exec(q)) {
           hashParams[e[1]] = decodeURIComponent(e[2]);
         }
         return hashParams;
       }
 
       var userProfileSource = document.getElementById('user-profile-template').innerHTML,
         userProfileTemplate = Handlebars.compile(userProfileSource),
         userProfilePlaceholder = document.getElementById('user-profile');
 
       var oauthSource = document.getElementById('oauth-template').innerHTML,
         oauthTemplate = Handlebars.compile(oauthSource),
         oauthPlaceholder = document.getElementById('oauth');
 
       var params = getHashParams();
 
       var access_token = params.access_token,
         refresh_token = params.refresh_token,
         error = params.error;
       
 
       if (error) {
         alert('There was an error during the authentication');
       } else {
         if (access_token) {
           // render oauth info
           oauthPlaceholder.innerHTML = oauthTemplate({
             access_token: access_token,
             refresh_token: refresh_token
           });
 
           $.ajax({
             url: 'https://api.spotify.com/v1/me',
             headers: {
               'Authorization': 'Bearer ' + access_token
             },
             success: function (response) {
               userProfilePlaceholder.innerHTML = userProfileTemplate(response);
 
               $('#login').hide();
               $('#loggedin').show();
             }
           });
           $.ajax({ //where we call backend and get our matches
              url: '/dictionary-matches',
              method: 'POST',
              data: { list: "some info" }
            }).done(function (data) {
              //if we have a successful post request ...
              if (data.success) {
                console.log(data); //data is dictionary => 
                hotPercentMatch = data.data.hotPercentMatch;
                userProfilePlaceholder.innerHTML = userProfileTemplate(data);

                return;
              }
            }).fail(function () {
              //do nothing ....
              console.log('failed...');
              return;
            });
 
         } else {
           // render initial screen
           $('#login').show();
           $('#loggedin').hide();
         }
 
       }
 
     })();
   </script>
 
 
   <footer>
     Made with ☕ by Cristie, Charu, and Margaret // ©2020
   </footer>
</body>
 
 
</html>

